FROM gcr.io/distroless/static-debian12
WORKDIR /app
COPY bin/tedge-container-monitor /usr/bin
ENTRYPOINT [ "/usr/bin/tedge-container-monitor" ]

ENV CONTAINER_LOG_LEVEL=info

ENV CONTAINER_MONITOR_FILTER_INCLUDE_IDS=
ENV CONTAINER_MONITOR_FILTER_INCLUDE_LABELS=
ENV CONTAINER_MONITOR_FILTER_INCLUDE_NAMES=
ENV CONTAINER_MONITOR_FILTER_INCLUDE_TYPES=
ENV CONTAINER_MONITOR_FILTER_EXCLUDE_LABELS=
ENV CONTAINER_MONITOR_FILTER_EXCLUDE_NAMES=

ENV CONTAINER_MONITOR_DELETE_FROM_CLOUD_ENABLED=
ENV CONTAINER_MONITOR_EVENTS_ENABLED=
ENV CONTAINER_MONITOR_METRICS_ENABLED=

ENV CONTAINER_MONITOR_MQTT_DEVICE_ID=
ENV CONTAINER_MONITOR_MQTT_DEVICE_TOPIC_ID=
ENV CONTAINER_MONITOR_MQTT_TOPIC_ROOT=
ENV CONTAINER_MONITOR_SERVICE_NAME=

# TLS
ENV CONTAINER_MONITOR_CLIENT_KEY=
ENV CONTAINER_MONITOR_CLIENT_CERT_FILE=
ENV CONTAINER_MONITOR_CLIENT_CA_FILE=

CMD ["run"]